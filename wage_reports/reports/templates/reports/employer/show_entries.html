{% extends "base.html" %}
{% block content %}
<h1>View This Month's Entries</h1>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
<a href="{% url 'reports:pre_approve_month' %}" class="btn btn-primary"> Approve this month</a>
<table class="table">
	<tr>
		<th>User id</th>
		<th>Name</th>
		<th>created</th>
		<th>gross_payment</th>
		<th>travel_expenses</th>
		<th>gross_or_cost</th>
		<th>is_required_to_pay_social_security</th>
		<th>is_employer_the_main_employer</th>
		<th>gross_payment_from_others</th>

		<th>Action</th>
		
	</tr>
	{% for entry in entries %}
	<tr>
		<td>
		  	{{entry.employee.user.id }}
		</td>
		<td>
			{{ entry.employee.user.first_name }} {{ entry.employee.user.last_name }}
		</td>
		<td>
			{{ entry.created }}
		</td>
		<td>
			{{ entry.gross_payment }}
		</td>
		<td>
			{{ entry.travel_expenses }}
		</td>
		<td>
		{% if entry.gross_or_cost %}
   			Gross
		{% else %}
		    Cost
		{% endif %}
			
		</td>
		<td>
		{% if entry.is_required_to_pay_social_security %}
   			Need to pay social security 
		{% else %}
		    Free of social security 
		{% endif %}
			
		</td>
		<td>
		{% if entry.is_employer_the_main_employer %}
   			Am main employer
		{% else %}
		    Not main employer
		{% endif %}
		</td>
		<td>
			{{ entry.gross_payment_from_others }}	
		</td>
		<td>
			<a href="{% url 'reports:edit_specific_entry' entry.employee.user.id %}" class="btn btn-defualt" >Edit entry</a>
			{% if not entry.is_approved and entry.has_data %}
	   			<button class="btn btn-success" onclick="approve_employee_monthly_entry('{% url 'reports:set_as_valid' %}' ,{{ entry.id }} , {{entry.employee.user.id }} , '{{ csrf_token }}')">Approve input</button>
			{% endif %}
			
		</td>
	</tr>   
	{% endfor %}
</table>
{% endblock content %}